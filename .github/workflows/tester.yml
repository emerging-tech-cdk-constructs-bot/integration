on: 
  workflow_dispatch:
    inputs:
      pullRequestNumber:
        type: string
        required: true
        default: '0'
      externalId:
        type: string
        required: true
        default: ''
jobs:
  manual:
    runs-on: ubuntu-latest
    env:
      GH_TOKEN: ${{ github.token }}
    permissions:
      id-token: write
      contents: read
      checks: write
      pull-requests: read
    steps:
      - name: Echo the event
        run: |
          cat << OBJECT
          ${{ toJson(github) }}
          OBJECT
      - name: Inputs
        run: |
          cat << OBJECT
          ${{ toJson(inputs) }}
          OBJECT
      - name: GitHub CLI version
        run: gh --version
      - name: stuff
        run: echo ${{event.repository.name}} ${{event.repository.owner.login}} ${{inputs.pullRequestNumber}} ${{inputs.externalId}}
      - name: Run GitHub API GraphQL
        run: |
          gh api graphql \
              --raw-field repositoryName="${{event.repository.name}}" \
              --raw-field repositoryOwner="${{event.repository.owner.login}}" \
              --raw-field pullRequestNumber="${{inputs.pullRequestNumber}}" \
              --raw-field externalId="${{inputs.externalId}}" \
              --field query='query{repository(followRenames: true, name: "integration", owner: "emerging-tech-cdk-constructs-bot") {name}}' | jq '.'
